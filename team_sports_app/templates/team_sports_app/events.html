{% extends "team_sports_app/base.html" %}
{% block header %}
  <h1 class="text-center">Events</h1>
{% endblock header%}

{% block content %}
  <div class="container-transparent container ">
    {% for event in events %}
    {% if forloop.first %}<div class="row">{% endif %}
    <div class="col-sm-4">
      <div class="panel panel-default">
        <div class="panel-heading">
          <div class="row" style="padding:0px;margin:0px">
            <div class="col-xs-9">
                <h4 >{{ event }}</h4>
              </div>
              <div class="col-xs-3">
                  <img class="img-circle img-responsive"src="/static/pic/portrait.jpg" alt="avatar">
              </div>
            </div>
          </div>

        <div class="panel-body" >
          <table class = "table">
            <tr>
              <th><span class="icon-user"></span>  Organizer</th>
              <td class="text-center">{{ event.owner}}</td>
            <tr>
              <th><span class="icon-time"></span>  When</th>
              <td class="text-center">{{ event.date_added|date:'M d, Y H:i' }}</td>
            </tr>
            <tr>
              <th><span class="icon-road"></span>  Venue</th>
              <td class="text-center">{{ event.Event_venue}}</td>
            </tr>
          </table>

          <div class="container-fluid">
            <p><span class="icon-group"></span> Player registratered:  {{event.Players_registratered}}/{{event.Max_players}}</p>
            {% widthratio event.Players_registratered event.Max_players 100 as Ratio %}
            <div class="progress progress-striped active text-center">
              {% if Ratio < '30' %}
                <div class="progress-bar progress-bar-info" role="progressbar"
                            aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width:{{Ratio}}%">
                </div>
              {% elif Ratio < '70' %}
                <div class="progress-bar progress-bar-success" role="progressbar"
                            aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width:{{Ratio}}%">
                </div>
              {% elif Ratio < '90' %}
                <div class="progress-bar progress-bar-warning" role="progressbar"
                            aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width:{{Ratio}}%">
                </div>
              {% else %}
                <div class="progress-bar progress-bar-danger" role="progressbar"
                            aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width:{{Ratio}}%">
                </div>
              {% endif %}
            </div>
          </div>
        </div>
        {% if user.is_authenticated %}
        <div class="text-center">
          <a href="{% url 'team_sports_app:event' user.username event.id %}">
            <button class="btn-primary btn-lg btn" type="button" name="button">View Details</button>
          </a>
        </div>
        {% else %}
        <div class="text-center">
          <a href="{% url 'users:login' %}">
            <button class="btn-primary btn-lg btn" type="button" name="button">View Details</button>
          </a>
        </div>
        {% endif %}
        <p></p>
      </div>
    </div>
    {% if forloop.counter|divisibleby:3 %}</div><div class="row">{% endif %}
    {% if forloop.last %}</div>{% endif %}
    {% empty %}
      <li>No events have been added yet.</li>
    {% endfor %}


    <h3 class="text-center">
      Create your own event!
      <a href="{% url 'team_sports_app:new_event' %}"><button class="btn-lg btn btn-primary ">Add a new event</button> </a>
    </h3>
  </div>
{% endblock content %}
